---
layout: default
title: seajs实战参考
---
<div class="page-header">
<h1>{{ page.title }} <small>Supporting tagline</small></h1>
</div>
<div class="row">
<div class="span8">
	<div class="v-entry">
		
				<h2 id="seajs">seajs实战参考</h2>
				<p>默认情况下，SeaJS 要求所有文件都是标准的 CMD 模块，但现实场景下，有大量 jQuery 插件等非 CMD 模块存在。在 SeaJS 里，通过以下方式，可以直接调用非标准模块。</p>
				
				<h3 id="js">1. 全站通用的要加载的库只写一次，而不想每个js里都调用，太繁琐</h3>
				<p>jQuery 插件都依赖 jQuery 模块，为了加载 jQuery 插件，首先得将 jQuery 模块暴露出来：</p>
					<pre>
<code>
//可以放在在 init.js 里暴露到全局，这样，所有在 init.js 之后载入的文件，就都可以直接通过全局变量来拿 $ 等对象。

seajs.use('init')

//init.js
define(function(require, exports) {
	var $ = jQuery = require('jquery');
	
	// 暴露到全局
	window.$ = $;
});

//用来维护 jquery 等类库模块的版本号
seajs.config({
  alias: {
	'jquery': 'jquery/1.6.2/jquery',
	'backbone': 'backbone/0.5.1/backbone',
	'a': 'a.js?20110801',
	'b': 'b.js?20110801'
  }
});	

//利用 map,批量更新时间戳是最方便的
seajs.config({
  'map': [
	[ /^(.*\.(?:css|js))(.*)$/i, '$1?20110801' ]
  ]
});	
</code>
					</pre>
					
					<h3 id="2__jquery_">2. 修改 jQuery 插件的接口</h3>
					<p>我们以 jquery.cookie 插件为例。</p>
<pre>
<code>
// 配置别名
seajs.config({
  alias: {
    'cookie': 'https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js'
  }
})

// 将 jQuery Cookie 插件自动包装成 CMD 接口
seajs.modify('cookie', function(require, exports, module) {
  module.exports = $.cookie
})

</code>
</pre>
		
	</div>
	<hr>
</div>

	{% include allposts %}
</div>